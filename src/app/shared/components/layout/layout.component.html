<ng-container *ngIf="{isTabletPortrait: isTabletPortrait$ | async, isDesktopExpanded: isDesktopExpanded$ | async} as aside">
  <!-- Side Navigation Rail -->
  <aj-navigation-rail *ngIf="aside.isTabletPortrait && !aside.isDesktopExpanded" [@navigationRailAnimation] [segments]="segments"></aj-navigation-rail>

  <!-- Side Navigation Drawer -->
  <aj-navigation-drawer *ngIf="aside.isDesktopExpanded" [@navigationDrawerAnimation] [segments]="segments"></aj-navigation-drawer>
</ng-container>

<!-- Main Content -->
<div class="flex-col overflow-auto flex-grow">
  <!-- Header -->
  <mat-toolbar>
    <div>
      <h1 class="mat-headline-6 m-0">{{title}}</h1>
    </div>

    <ng-container *ngIf="auth.user$ | async; else notSignedIn">
      <button mat-button (click)="auth.logout()">
        <mat-icon fontIcon="logout"></mat-icon>
        Sign out
      </button>
    </ng-container>
    <ng-template #notSignedIn>
      <button mat-button [routerLink]="[nav_path.signIn]">
        <mat-icon fontIcon="login"></mat-icon>
        Sign in
      </button>
    </ng-template>
  </mat-toolbar>

  <!-- Content -->
  <main class="page-padding"><router-outlet></router-outlet></main>

  <!-- Bottom Navigation Bar -->
  <aj-navigation-bar *ngIf="isMobile$ | async" [@navigationBarAnimation] [segments]="segments"></aj-navigation-bar>
</div>
